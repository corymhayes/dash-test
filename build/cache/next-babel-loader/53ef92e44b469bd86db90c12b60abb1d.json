{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Component } from 'react';\nimport io from 'socket.io-client';\nimport fetch from 'isomorphic-unfetch';\nimport Layout from '../../components/Layout';\nimport MobileLayout from '../../components/MobileLayout';\nimport Details from '../../components/Details';\nexport default class Site extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      companies: []\n    });\n  }\n\n  static async getInitialProps(ctx) {\n    const {\n      name,\n      site\n    } = ctx.query;\n    const res = await fetch(`http://jct-systems.com/api/${name}/${site}`);\n    const json = await res.json();\n    let isMobileView = ctx.req.headers['user-agent'].search(/Android|iPhone/i);\n\n    if (isMobileView < 0) {\n      return {\n        isMobileView: false,\n        equipment: json[1]\n      };\n    } else {\n      return {\n        isMobileView: true,\n        equipment: json[1]\n      };\n    }\n  }\n\n  render() {\n    return this.props.isMobileView ? __jsx(MobileLayout, {\n      company_name: \"Doghouse Oil & Gas\",\n      site_name: \"Anchor Battery\"\n    }, this.props.equipment.map(equip => __jsx(Details, {\n      key: equip.id,\n      name: equip.name,\n      currentValue: equip.currentLevel,\n      totalValue: equip.totalLevel,\n      alarmOn: equip.on_level,\n      alarmOff: equip.off_level,\n      mon: equip.monValue,\n      tue: equip.tueValue,\n      wed: equip.wedValue,\n      thu: equip.thuValue,\n      fri: equip.friValue,\n      sat: equip.satValue,\n      sun: equip.sunValue\n    }))) : __jsx(Layout, {\n      company_name: \"Doghouse Oil & Gas\",\n      site_name: \"Anchor Battery\"\n    }, this.props.equipment.map(equip => __jsx(Details, {\n      key: equip.id,\n      name: equip.name,\n      currentValue: equip.currentLevel,\n      totalValue: equip.totalLevel,\n      alarmOn: equip.on_level,\n      alarmOff: equip.off_level,\n      mon: equip.monValue,\n      tue: equip.tueValue,\n      wed: equip.wedValue,\n      thu: equip.thuValue,\n      fri: equip.friValue,\n      sat: equip.satValue,\n      sun: equip.sunValue\n    })));\n  }\n\n}\n\n_defineProperty(Site, \"defaultProps\", {\n  company: []\n});","map":null,"metadata":{},"sourceType":"module"}